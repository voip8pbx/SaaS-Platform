{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/NEXT.js/SuperAdmin/src/lib/db.ts"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\n// MONGODB_URI should be accessed dynamically to ensure environment variables are loaded\r\n\r\n\r\n\r\n/**\r\n * Global is used here to maintain a cached connection across hot reloads\r\n * in development. This prevents connections growing exponentially\r\n * during API Route usage.\r\n */\r\ninterface GlobalMongoose {\r\n    conn: typeof mongoose | null;\r\n    promise: Promise<typeof mongoose> | null;\r\n}\r\n\r\ndeclare global {\r\n    var mongoose: GlobalMongoose;\r\n}\r\n\r\nlet cached = global.mongoose;\r\n\r\nif (!cached) {\r\n    cached = global.mongoose = { conn: null, promise: null };\r\n}\r\n\r\nasync function dbConnect() {\r\n    const MONGODB_URI = process.env.MONGODB_URI;\r\n\r\n    if (!MONGODB_URI) {\r\n        throw new Error(\r\n            'Please define the MONGODB_URI environment variable inside .env.local'\r\n        );\r\n    }\r\n\r\n    if (cached.conn) {\r\n        return cached.conn;\r\n    }\r\n\r\n    if (!cached.promise) {\r\n        const opts = {\r\n            bufferCommands: false,\r\n        };\r\n\r\n        cached.promise = mongoose.connect(MONGODB_URI!, opts).then((mongoose) => {\r\n            return mongoose;\r\n        });\r\n    }\r\n\r\n    try {\r\n        cached.conn = await cached.promise;\r\n    } catch (e) {\r\n        cached.promise = null;\r\n        throw e;\r\n    }\r\n\r\n    return cached.conn;\r\n}\r\n\r\nexport default dbConnect;\r\n"],"names":[],"mappings":";;;;AAAA;;AAoBA,IAAI,SAAS,OAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACT,SAAS,OAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AAC3D;AAEA,eAAe;IACX,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;IAE3C,IAAI,CAAC,aAAa;QACd,MAAM,IAAI,MACN;IAER;IAEA,IAAI,OAAO,IAAI,EAAE;QACb,OAAO,OAAO,IAAI;IACtB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACjB,MAAM,OAAO;YACT,gBAAgB;QACpB;QAEA,OAAO,OAAO,GAAG,mKAAQ,CAAC,OAAO,CAAC,aAAc,MAAM,IAAI,CAAC,CAAC;YACxD,OAAO;QACX;IACJ;IAEA,IAAI;QACA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACtC,EAAE,OAAO,GAAG;QACR,OAAO,OAAO,GAAG;QACjB,MAAM;IACV;IAEA,OAAO,OAAO,IAAI;AACtB;uCAEe"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///D:/NEXT.js/SuperAdmin/src/models/User.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from 'mongoose';\r\n\r\nexport interface IUser extends Document {\r\n    adminId: string; // The Admin ID this user belongs to\r\n    name: string;\r\n    email: string;\r\n    contactNumber: string;\r\n    role: 'customer' | 'agent';\r\n    password?: string; // If handling auth\r\n    bookings: mongoose.Types.ObjectId[]; // References to Booking model\r\n    createdAt: Date;\r\n    updatedAt: Date;\r\n}\r\n\r\nconst UserSchema: Schema = new Schema({\r\n    adminId: { type: String, required: true, index: true }, // Index for fast lookup by tenant\r\n    name: { type: String, required: true },\r\n    email: { type: String, required: true },\r\n    contactNumber: { type: String, required: false },\r\n    role: { type: String, enum: ['customer', 'agent'], default: 'customer' },\r\n    password: { type: String }, // Store hashed pw\r\n    bookings: [{ type: Schema.Types.ObjectId, ref: 'Booking' }],\r\n}, { timestamps: true });\r\n\r\n// Composite unique index ensures email is unique PER ADMIN (tenant isolation)\r\n// Or global unique if that's the requirement. Usually SaaS is tenant isolated.\r\n// For now, let's keep email unique globally to keep it simple unless specified.\r\nUserSchema.index({ email: 1 }, { unique: true });\r\n\r\nconst User: Model<IUser> = mongoose.models.User || mongoose.model<IUser>('User', UserSchema);\r\n\r\nexport default User;\r\n"],"names":[],"mappings":";;;;AAAA;;AAcA,MAAM,aAAqB,IAAI,kKAAM,CAAC;IAClC,SAAS;QAAE,MAAM;QAAQ,UAAU;QAAM,OAAO;IAAK;IACrD,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,eAAe;QAAE,MAAM;QAAQ,UAAU;IAAM;IAC/C,MAAM;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAY;SAAQ;QAAE,SAAS;IAAW;IACvE,UAAU;QAAE,MAAM;IAAO;IACzB,UAAU;QAAC;YAAE,MAAM,kKAAM,CAAC,KAAK,CAAC,QAAQ;YAAE,KAAK;QAAU;KAAE;AAC/D,GAAG;IAAE,YAAY;AAAK;AAEtB,8EAA8E;AAC9E,+EAA+E;AAC/E,gFAAgF;AAChF,WAAW,KAAK,CAAC;IAAE,OAAO;AAAE,GAAG;IAAE,QAAQ;AAAK;AAE9C,MAAM,OAAqB,mKAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,mKAAQ,CAAC,KAAK,CAAQ,QAAQ;uCAElE"}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///D:/NEXT.js/SuperAdmin/src/app/api/mobile/auth/route.ts"],"sourcesContent":["\r\nimport { NextResponse } from 'next/server';\r\nimport dbConnect from '@/lib/db';\r\nimport User from '@/models/User';\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        await dbConnect();\r\n        const { name, email, photoUrl, adminId, googleId } = await req.json();\r\n\r\n        if (!email || !adminId) {\r\n            return NextResponse.json({ error: 'Missing required fields' }, { status: 400 });\r\n        }\r\n\r\n        // Check if user exists for this admin\r\n        let user = await User.findOne({ email, adminId });\r\n\r\n        if (!user) {\r\n            // Create new user\r\n            user = await User.create({\r\n                name,\r\n                email,\r\n                adminId,\r\n                role: 'customer',\r\n                contactNumber: '', // Optional now\r\n                // You might want to store googleId or photoUrl if the schema supports it\r\n                // For now, adhering to existing schema\r\n            });\r\n        }\r\n\r\n        return NextResponse.json({ success: true, user }, { status: 200 });\r\n\r\n    } catch (error) {\r\n        console.error('Error in mobile auth:', error);\r\n        return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;AAEO,eAAe,KAAK,GAAY;IACnC,IAAI;QACA,MAAM,IAAA,6HAAS;QACf,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QAEnE,IAAI,CAAC,SAAS,CAAC,SAAS;YACpB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QACjF;QAEA,sCAAsC;QACtC,IAAI,OAAO,MAAM,kIAAI,CAAC,OAAO,CAAC;YAAE;YAAO;QAAQ;QAE/C,IAAI,CAAC,MAAM;YACP,kBAAkB;YAClB,OAAO,MAAM,kIAAI,CAAC,MAAM,CAAC;gBACrB;gBACA;gBACA;gBACA,MAAM;gBACN,eAAe;YAGnB;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM;QAAK,GAAG;YAAE,QAAQ;QAAI;IAEpE,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACJ"}}]
}