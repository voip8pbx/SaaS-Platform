{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/NEXT.js/SuperAdmin/src/app/api/generate-ai/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport OpenAI from 'openai';\r\n\r\nconst openai = new OpenAI({\r\n    apiKey: process.env.OPENROUTER_API_KEY,\r\n    baseURL: 'https://openrouter.ai/api/v1',\r\n    defaultHeaders: {\r\n        'HTTP-Referer': 'https://holatravelers.com', // Optional, using a placeholder\r\n        'X-Title': 'SuperAdmin Site Generator', // Optional\r\n    },\r\n});\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        const { prompt } = await req.json();\r\n\r\n        if (!prompt) {\r\n            return NextResponse.json({ error: 'Prompt is required' }, { status: 400 });\r\n        }\r\n\r\n        const systemPrompt = `\r\n      You are an expert web designer and branding specialist. \r\n      Your task is to generate a configuration for a travel website based on a user's request.\r\n      \r\n      You must return a strictly valid JSON object with the following fields:\r\n      - name: A creative catchy name for the website (string).\r\n      - description: A compelling, professional 1-2 sentence description (string).\r\n      - primaryColor: A hex color code that matches the vibe (string, e.g., \"#ff0000\").\r\n      - theme: Must be either \"light\" or \"dark\" (string).\r\n      - layout: Must be one of \"classic\", \"modern\", \"minimal\", \"showcase\" (string). Use \"showcase\" for visual-heavy themes like nature, space, or movies.\r\n      - heroImage: A high-quality, real unsplash.com image URL that matches the theme (string). Example: \"https://images.unsplash.com/photo-1234...\"\r\n      \r\n      Do not include markdown formatting (like \\`\\`\\`json). Just return the raw JSON string.\r\n    `;\r\n\r\n        const completion = await openai.chat.completions.create({\r\n            model: 'openai/gpt-3.5-turbo', // Using a fast, reliable model via OpenRouter\r\n            messages: [\r\n                { role: 'system', content: systemPrompt },\r\n                { role: 'user', content: `Generate a website configuration for: ${prompt}` }\r\n            ],\r\n            temperature: 0.7,\r\n        });\r\n\r\n        const content = completion.choices[0]?.message?.content?.trim();\r\n\r\n        if (!content) {\r\n            throw new Error('No content received from AI');\r\n        }\r\n\r\n        // Clean up if AI adds markdown code blocks\r\n        const cleanContent = content.replace(/^```json/, '').replace(/```$/, '').trim();\r\n\r\n        let config;\r\n        try {\r\n            config = JSON.parse(cleanContent);\r\n        } catch (e) {\r\n            console.error(\"Failed to parse AI response:\", content);\r\n            return NextResponse.json({ error: 'Failed to parse AI response' }, { status: 500 });\r\n        }\r\n\r\n        return NextResponse.json(config);\r\n\r\n    } catch (error) {\r\n        console.error('AI Generation Error:', error);\r\n        return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAEA,MAAM,SAAS,IAAI,mLAAM,CAAC;IACtB,QAAQ,QAAQ,GAAG,CAAC,kBAAkB;IACtC,SAAS;IACT,gBAAgB;QACZ,gBAAgB;QAChB,WAAW;IACf;AACJ;AAEO,eAAe,KAAK,GAAY;IACnC,IAAI;QACA,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,IAAI;QAEjC,IAAI,CAAC,QAAQ;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAqB,GAAG;gBAAE,QAAQ;YAAI;QAC5E;QAEA,MAAM,eAAe,CAAC;;;;;;;;;;;;;IAa1B,CAAC;QAEG,MAAM,aAAa,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,OAAO;YACP,UAAU;gBACN;oBAAE,MAAM;oBAAU,SAAS;gBAAa;gBACxC;oBAAE,MAAM;oBAAQ,SAAS,CAAC,sCAAsC,EAAE,QAAQ;gBAAC;aAC9E;YACD,aAAa;QACjB;QAEA,MAAM,UAAU,WAAW,OAAO,CAAC,EAAE,EAAE,SAAS,SAAS;QAEzD,IAAI,CAAC,SAAS;YACV,MAAM,IAAI,MAAM;QACpB;QAEA,2CAA2C;QAC3C,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY,IAAI,OAAO,CAAC,QAAQ,IAAI,IAAI;QAE7E,IAAI;QACJ,IAAI;YACA,SAAS,KAAK,KAAK,CAAC;QACxB,EAAE,OAAO,GAAG;YACR,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QACrF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAE7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACJ"}}]
}