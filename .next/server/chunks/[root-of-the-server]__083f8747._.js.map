{"version":3,"sources":["../../../src/lib/db.ts","../../../src/models/Admin.ts"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\n// MONGODB_URI should be accessed dynamically to ensure environment variables are loaded\r\n\r\n\r\n\r\n/**\r\n * Global is used here to maintain a cached connection across hot reloads\r\n * in development. This prevents connections growing exponentially\r\n * during API Route usage.\r\n */\r\ninterface GlobalMongoose {\r\n    conn: typeof mongoose | null;\r\n    promise: Promise<typeof mongoose> | null;\r\n}\r\n\r\ndeclare global {\r\n    var mongoose: GlobalMongoose;\r\n}\r\n\r\nlet cached = global.mongoose;\r\n\r\nif (!cached) {\r\n    cached = global.mongoose = { conn: null, promise: null };\r\n}\r\n\r\nasync function dbConnect() {\r\n    const MONGODB_URI = process.env.MONGODB_URI;\r\n\r\n    if (!MONGODB_URI) {\r\n        throw new Error(\r\n            'Please define the MONGODB_URI environment variable inside .env.local'\r\n        );\r\n    }\r\n\r\n    if (cached.conn) {\r\n        return cached.conn;\r\n    }\r\n\r\n    if (!cached.promise) {\r\n        const opts = {\r\n            bufferCommands: false,\r\n        };\r\n\r\n        cached.promise = mongoose.connect(MONGODB_URI!, opts).then((mongoose) => {\r\n            return mongoose;\r\n        });\r\n    }\r\n\r\n    try {\r\n        cached.conn = await cached.promise;\r\n    } catch (e) {\r\n        cached.promise = null;\r\n        throw e;\r\n    }\r\n\r\n    return cached.conn;\r\n}\r\n\r\nexport default dbConnect;\r\n","import mongoose, { Schema, Document, Model } from 'mongoose';\r\n\r\nexport interface IAdmin extends Document {\r\n    adminId: string; // Unique identifier for the Admin\r\n\r\n    // Whitelabel Configuration (Assigned by Superadmin)\r\n    features: {\r\n        flights: boolean;\r\n        hotels: boolean;\r\n        trains: boolean;\r\n        cabs: boolean;\r\n        carRentals: boolean;\r\n        bikeRentals: boolean;\r\n        villas: boolean;\r\n        cruises: boolean;\r\n    };\r\n\r\n    // Theme Configuration\r\n    theme: {\r\n        primaryColor: string;\r\n        secondaryColor: string;\r\n        mode: 'light' | 'dark';\r\n        fontFamily: string;\r\n        layout: string; // Add layout here\r\n    };\r\n\r\n    // Company Details (Filled by Admin)\r\n    companyDetails: {\r\n        name: string;\r\n        logoUrl?: string;\r\n        description?: string;\r\n    };\r\n\r\n    contact: {\r\n        phone: string;\r\n        email: string;\r\n        address: string;\r\n    };\r\n\r\n    social: {\r\n        twitter: string;\r\n        facebook: string;\r\n        instagram: string;\r\n        linkedin: string;\r\n    };\r\n\r\n    content: {\r\n        aboutUs: string;\r\n        career: string;\r\n        blog: string;\r\n    };\r\n\r\n    isActive: boolean;\r\n    createdAt: Date;\r\n    updatedAt: Date;\r\n}\r\n\r\nconst AdminSchema: Schema = new Schema({\r\n    adminId: { type: String, required: true, unique: true },\r\n\r\n    features: {\r\n        flights: { type: Boolean, default: false },\r\n        hotels: { type: Boolean, default: false },\r\n        trains: { type: Boolean, default: false },\r\n        cabs: { type: Boolean, default: false },\r\n        carRentals: { type: Boolean, default: false },\r\n        bikeRentals: { type: Boolean, default: false },\r\n        villas: { type: Boolean, default: false },\r\n        cruises: { type: Boolean, default: false },\r\n    },\r\n\r\n    theme: {\r\n        primaryColor: { type: String, default: '#000000' },\r\n        secondaryColor: { type: String, default: '#ffffff' },\r\n        mode: { type: String, enum: ['light', 'dark'], default: 'light' },\r\n        fontFamily: { type: String, default: 'Inter' },\r\n        layout: { type: String, default: 'classic' }, // Add layout here\r\n    },\r\n\r\n    companyDetails: {\r\n        name: { type: String },\r\n        logoUrl: { type: String },\r\n        description: { type: String },\r\n    },\r\n\r\n    contact: {\r\n        phone: { type: String },\r\n        email: { type: String },\r\n        address: { type: String },\r\n    },\r\n\r\n    social: {\r\n        twitter: { type: String },\r\n        facebook: { type: String },\r\n        instagram: { type: String },\r\n        linkedin: { type: String },\r\n    },\r\n\r\n    content: {\r\n        aboutUs: { type: String },\r\n        career: { type: String },\r\n        blog: { type: String },\r\n    },\r\n\r\n    isActive: { type: Boolean, default: true },\r\n}, { timestamps: true });\r\n\r\n// Check if model is already compiled to avoid Hot Reload errors\r\nconst Admin: Model<IAdmin> = mongoose.models.Admin || mongoose.model<IAdmin>('Admin', AdminSchema);\r\n\r\nexport default Admin;\r\n"],"names":[],"mappings":"qwCAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAoBA,IAAI,EAAS,OAAO,QAAQ,CAM5B,eAAe,IACX,IAAM,EAAc,QAAQ,GAAG,CAAC,WAAW,CAE3C,GAAI,CAAC,EACD,MAAM,AAAI,KADI,CAEV,wEAIR,GAAI,EAAO,IAAI,CACX,CADa,MACN,EAAO,IAAI,CAGjB,EAAO,OAAO,EAAE,AAKjB,GAAO,OAAO,CAAG,EAAA,OAAQ,CAAC,OAAO,CAAC,EAJrB,CACT,UAG4C,MAH5B,CACpB,GAEsD,IAAI,CAAC,AAAC,GACjD,EACX,EAGJ,GAAI,CACA,EAAO,IAAI,CAAG,MAAM,EAAO,OAAO,AACtC,CAAE,MAAO,EAAG,CAER,MADA,EAAO,OAAO,CAAG,KACX,CACV,CAEA,OAAO,EAAO,IAAI,AACtB,CAnCI,AAAC,IACD,EAAS,EADA,KACO,QAAQ,CAAG,CAAE,KAAM,KAAM,QAAS,KAAK,mBAoC5C,4BC3Df,IAAA,EAAA,EAAA,CAAA,CAAA,OAyDA,IAAM,EAAsB,IAAI,EAAA,MAAM,CAAC,CACnC,QAAS,CAAE,KAAM,OAAQ,UAAU,EAAM,OAAQ,EAAK,EAEtD,SAAU,CACN,QAAS,CAAE,KAAM,QAAS,SAAS,CAAM,EACzC,OAAQ,CAAE,KAAM,QAAS,QAAS,EAAM,EACxC,OAAQ,CAAE,KAAM,QAAS,SAAS,CAAM,EACxC,KAAM,CAAE,KAAM,QAAS,SAAS,CAAM,EACtC,WAAY,CAAE,KAAM,QAAS,SAAS,CAAM,EAC5C,YAAa,CAAE,KAAM,QAAS,SAAS,CAAM,EAC7C,OAAQ,CAAE,KAAM,QAAS,SAAS,CAAM,EACxC,QAAS,CAAE,KAAM,QAAS,QAAS,EAAM,CAC7C,EAEA,MAAO,CACH,aAAc,CAAE,KAAM,OAAQ,QAAS,SAAU,EACjD,eAAgB,CAAE,KAAM,OAAQ,QAAS,SAAU,EACnD,KAAM,CAAE,KAAM,OAAQ,KAAM,CAAC,QAAS,OAAO,CAAE,QAAS,OAAQ,EAChE,WAAY,CAAE,KAAM,OAAQ,QAAS,OAAQ,EAC7C,OAAQ,CAAE,KAAM,OAAQ,QAAS,SAAU,CAC/C,EAEA,eAAgB,CACZ,KAAM,CAAE,KAAM,MAAO,EACrB,QAAS,CAAE,KAAM,MAAO,EACxB,YAAa,CAAE,KAAM,MAAO,CAChC,EAEA,QAAS,CACL,MAAO,CAAE,KAAM,MAAO,EACtB,MAAO,CAAE,KAAM,MAAO,EACtB,QAAS,CAAE,KAAM,MAAO,CAC5B,EAEA,OAAQ,CACJ,QAAS,CAAE,KAAM,MAAO,EACxB,SAAU,CAAE,KAAM,MAAO,EACzB,UAAW,CAAE,KAAM,MAAO,EAC1B,SAAU,CAAE,KAAM,MAAO,CAC7B,EAEA,QAAS,CACL,QAAS,CAAE,KAAM,MAAO,EACxB,OAAQ,CAAE,KAAM,MAAO,EACvB,KAAM,CAAE,KAAM,MAAO,CACzB,EAEA,SAAU,CAAE,KAAM,QAAS,SAAS,CAAK,CAC7C,EAAG,CAAE,WAAY,EAAK,GAGhB,EAAuB,EAAA,OAAQ,CAAC,MAAM,CAAC,KAAK,EAAI,EAAA,OAAQ,CAAC,KAAK,CAAS,QAAS,oBAEvE"}