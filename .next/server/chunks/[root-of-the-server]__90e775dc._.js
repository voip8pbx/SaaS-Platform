module.exports=[88947,(e,t,a)=>{t.exports=e.x("stream",()=>require("stream"))},37765,e=>{"use strict";var t=e.i(47909),a=e.i(74017),r=e.i(96250),n=e.i(59756),o=e.i(61916),s=e.i(74677),i=e.i(69741),l=e.i(16795),c=e.i(87718),d=e.i(95169),u=e.i(47587),p=e.i(66012),g=e.i(70101),f=e.i(26937),m=e.i(10372),h=e.i(93695);e.i(52474);var v=e.i(220),y=e.i(89171),b=e.i(22734),R=e.i(14747),C=e.i(88947),w=e.i(24361),E=e.i(43793),x=e.i(37887);async function $(e){try{let t=await e.formData();console.log("[POST Config] Incoming FormData Keys:",[...t.keys()]),console.log("[POST Config] adminUserId from FormData:",t.get("adminUserId"));let a="d:\\NEXT.js\\SuperAdmin\\templates\\TravelPlannerWebsite\\src\\config\\siteConfig.ts",r="";if(b.default.existsSync(a))try{r=b.default.readFileSync(a,"utf8")}catch(e){}let n=(e,t="")=>{let a=r.match(RegExp(`${e}:\\s*[\`"]([^\`"]*)[\`"]`));return a?a[1]:t},o=e=>{let t=r.match(RegExp(`${e}:\\s*\`([^\`]*)\``));if(t)return t[1];let a=r.match(RegExp(`${e}:\\s*"([^"]*)"`));return a?a[1]:""},s=t.get("name"),i=t.get("description"),l=t.get("adminUserId"),c=null!==l?l:n("adminUserId");console.log("[POST Config] Processing update for adminUserId:",c);let d=t.get("features"),u=t.get("logoFile"),p=t.get("logoPath"),g=t.get("primaryColor"),f=t.get("theme"),m=t.get("layout"),h=t.get("heroImage"),v=null!==t.get("contact_phone")?t.get("contact_phone"):n("phone","+1 (555) 123-4567"),C=null!==t.get("contact_email")?t.get("contact_email"):n("email","support@travelpanner.com"),w=null!==t.get("contact_address")?t.get("contact_address"):n("address","123 Travel Street, Cloud City, TC 90210"),$=null!==t.get("social_twitter")?t.get("social_twitter"):n("twitter","https://twitter.com/travelpanner"),U=null!==t.get("social_facebook")?t.get("social_facebook"):n("facebook","https://facebook.com/travelpanner"),k=null!==t.get("social_instagram")?t.get("social_instagram"):n("instagram","https://instagram.com/travelpanner"),T=null!==t.get("social_linkedin")?t.get("social_linkedin"):n("linkedin","https://linkedin.com/company/travelpanner"),S=null!==t.get("content_aboutUs")?t.get("content_aboutUs"):o("aboutUs"),_=null!==t.get("content_career")?t.get("content_career"):o("career"),I=null!==t.get("content_blog")?t.get("content_blog"):o("blog"),P=(()=>{try{let e=JSON.parse(d||"{}");return console.log("Config Update - Received Features:",e),e}catch(e){return console.error("Config Update - JSON Parse Error:",e),{}}})(),N=p||"";if(u&&u.size>0){let e=Buffer.from(await u.arrayBuffer()),t=`logo-${Date.now()}${R.default.extname(u.name)}`,a="d:\\NEXT.js\\SuperAdmin\\templates\\TravelPlannerWebsite\\public\\uploads";b.default.existsSync(a)||b.default.mkdirSync(a,{recursive:!0});let r=R.default.join(a,t);b.default.writeFileSync(r,e),N=`/uploads/${t}`}else N||(N=n("logo"));let A=`export const siteConfig = {
    name: "${s}",
    adminUserId: "${c}",
    description: "${i}",
    logo: "${N}",
    primaryColor: "${g||"#3b82f6"}",
    ${(()=>{let e=`customColors: {
        background: "",
        header: ""
    }`;if(b.default.existsSync(a))try{let t=b.default.readFileSync(a,"utf8").match(/customColors:\s*\{[\s\S]*?\}(?=\,\s*theme:)/);t&&(e=t[0])}catch(e){}return e})()},
    theme: "${f||"light"}",
    layout: "${m||"classic"}",
    heroImage: "${h||"https://images.unsplash.com/photo-1436491865332-7a61a109cc05?q=80&w=2074&auto=format&fit=crop"}",
    features: {
        flights: ${void 0===P.flights||P.flights},
        packages: ${void 0===P.packages||P.packages},
        hotels: ${void 0===P.hotels||P.hotels},
        trains: ${void 0===P.trains||P.trains},
        cabs: ${void 0===P.cabs||P.cabs},
        rentals: ${void 0===P.rentals||P.rentals},
        cars: ${void 0!==P.cars&&P.cars},
        aiPlanner: ${void 0!==P.aiPlanner&&P.aiPlanner},
        cruises: ${void 0===P.cruises||P.cruises},
        villas: ${void 0===P.villas||P.villas},
        news: ${void 0===P.news||P.news}
    },
    contact: {
        phone: "${v||"+1 (555) 123-4567"}",
        email: "${C||"support@travelpanner.com"}",
        address: "${w||"123 Travel Street, Cloud City, TC 90210"}"
    },
    social: {
        twitter: "${$||"https://twitter.com/travelpanner"}",
        facebook: "${U||"https://facebook.com/travelpanner"}",
        instagram: "${k||"https://instagram.com/travelpanner"}",
        linkedin: "${T||"https://linkedin.com/company/travelpanner"}"
    },
    content: {
        aboutUs: \`${S||""}\`,
        career: \`${_||""}\`,
        blog: \`${I||""}\`
    },
    currency: {
        code: "USD", // default
        symbol: "$" // default
    }
};

export type SiteConfig = typeof siteConfig;
`;b.default.writeFileSync(a,A,"utf-8");try{await (0,E.default)();let e={flights:void 0===P.flights||P.flights,hotels:void 0===P.hotels||P.hotels,trains:void 0===P.trains||P.trains,cabs:void 0===P.cabs||P.cabs,carRentals:void 0===P.rentals||P.rentals,villas:void 0===P.villas||P.villas,cruises:void 0===P.cruises||P.cruises};await x.default.findOneAndUpdate({adminId:c||"default"},{$set:{features:e,theme:{mode:f||"light",primaryColor:g||"#3b82f6",layout:m||"classic"},companyDetails:{name:s,description:i,logoUrl:N},contact:{phone:v,email:C,address:w},social:{twitter:$,facebook:U,instagram:k,linkedin:T},content:{aboutUs:S,career:_,blog:I}}},{upsert:!0,new:!0})}catch(e){console.error("MongoDB Error:",e)}return y.NextResponse.json({success:!0,message:"Configuration updated successfully"})}catch(e){return console.error("Error updating config:",e),y.NextResponse.json({success:!1,error:"Failed to update configuration"},{status:500})}}async function U(){try{let e="d:\\NEXT.js\\SuperAdmin\\templates\\TravelPlannerWebsite\\src\\config\\siteConfig.ts";if(!b.default.existsSync(e))return y.NextResponse.json({success:!1,error:"Config file not found"},{status:404});let t=b.default.readFileSync(e,"utf8"),a=e=>{let a=RegExp(`${e}\\s*:\\s*(["'\`])((?:\\\\.|(?!\\1).)*)\\1`),r=t.match(a);return r?r[2]:""},r=a("adminUserId");console.log(`[GET Config] Reading config from: ${e}`),console.log(`[GET Config] Extracted adminUserId: "${r}"`);let n=e=>{let a=t.match(RegExp(`${e}:\\s*(true|false)`));return!!a&&"true"===a[1]},o={flights:n("flights"),packages:n("packages"),hotels:n("hotels"),trains:n("trains"),cabs:n("cabs"),rentals:n("rentals"),cars:n("cars"),aiPlanner:n("aiPlanner"),cruises:n("cruises"),villas:n("villas"),news:n("news")},s={name:a("name"),description:a("description"),logo:a("logo"),adminUserId:a("adminUserId"),primaryColor:a("primaryColor"),theme:a("theme"),layout:a("layout"),heroImage:a("heroImage"),features:o,contact:{phone:a("phone"),email:a("email"),address:a("address")},social:{twitter:a("twitter"),facebook:a("facebook"),instagram:a("instagram"),linkedin:a("linkedin")},content:{aboutUs:t.match(/aboutUs:\s*`([^`]*)`/)?.[1]||"",career:t.match(/career:\s*`([^`]*)`/)?.[1]||"",blog:t.match(/blog:\s*`([^`]*)`/)?.[1]||""}},i=null;try{if(await (0,E.default)(),s.adminUserId){console.log("[GET Config] Querying DB for:",s.adminUserId);let e=await x.default.findOne({adminId:s.adminUserId});console.log("[GET Config] DB Result found:",!!e,e?.adminId),e&&(i={name:e.companyDetails?.name??s.name,description:e.companyDetails?.description??s.description,logo:e.companyDetails?.logoUrl??s.logo,adminUserId:e.adminId,primaryColor:e.theme?.primaryColor??s.primaryColor,theme:e.theme?.mode??s.theme,layout:e.theme?.layout??s.layout,features:{...o,flights:e.features?.flights??o.flights,hotels:e.features?.hotels??o.hotels,trains:e.features?.trains??o.trains,cabs:e.features?.cabs??o.cabs,rentals:e.features?.carRentals??o.rentals,cruises:e.features?.cruises??o.cruises,villas:e.features?.villas??o.villas},contact:{phone:e.contact?.phone??s.contact.phone,email:e.contact?.email??s.contact.email,address:e.contact?.address??s.contact.address},social:{twitter:e.social?.twitter??s.social.twitter,facebook:e.social?.facebook??s.social.facebook,instagram:e.social?.instagram??s.social.instagram,linkedin:e.social?.linkedin??s.social.linkedin},content:{aboutUs:e.content?.aboutUs??s.content.aboutUs,career:e.content?.career??s.content.career,blog:e.content?.blog??s.content.blog}})}}catch(e){console.error("Failed to fetch from DB in GET config",e)}if(i)return y.NextResponse.json({...s,...i,features:{...s.features,...i.features}});return y.NextResponse.json(s)}catch(e){return console.error("Error reading config:",e),y.NextResponse.json({success:!1,error:"Failed to read configuration"},{status:500})}}(0,w.promisify)(C.pipeline),e.s(["GET",()=>U,"POST",()=>$,"dynamic",0,"force-dynamic","revalidate",0,0],77025);var k=e.i(77025);let T=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/config/route",pathname:"/api/config",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/config/route.ts",nextConfigOutput:"",userland:k}),{workAsyncStorage:S,workUnitAsyncStorage:_,serverHooks:I}=T;function P(){return(0,r.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:_})}async function N(e,t,r){T.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let y="/api/config/route";y=y.replace(/\/index$/,"")||"/";let b=await T.prepare(e,t,{srcPage:y,multiZoneDraftMode:!1});if(!b)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:R,params:C,nextConfig:w,parsedUrl:E,isDraftMode:x,prerenderManifest:$,routerServerContext:U,isOnDemandRevalidate:k,revalidateOnlyGenerated:S,resolvedPathname:_,clientReferenceManifest:I,serverActionsManifest:P}=b,N=(0,i.normalizeAppPath)(y),A=!!($.dynamicRoutes[N]||$.routes[_]),O=async()=>((null==U?void 0:U.render404)?await U.render404(e,t,E,!1):t.end("This page could not be found"),null);if(A&&!x){let e=!!$.routes[_],t=$.dynamicRoutes[N];if(t&&!1===t.fallback&&!e){if(w.experimental.adapterPath)return await O();throw new h.NoFallbackError}}let D=null;!A||T.isDev||x||(D="/index"===(D=_)?"/":D);let F=!0===T.isDev||!A,j=A&&!F;P&&I&&(0,s.setManifestsSingleton)({page:y,clientReferenceManifest:I,serverActionsManifest:P});let H=e.method||"GET",q=(0,o.getTracer)(),M=q.getActiveScopeSpan(),B={params:C,prerenderManifest:$,renderOpts:{experimental:{authInterrupts:!!w.experimental.authInterrupts},cacheComponents:!!w.cacheComponents,supportsDynamicResponse:F,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:w.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,r,n)=>T.onRequestError(e,t,r,n,U)},sharedContext:{buildId:R}},G=new l.NodeNextRequest(e),K=new l.NodeNextResponse(t),X=c.NextRequestAdapter.fromNodeNextRequest(G,(0,c.signalFromNodeResponse)(t));try{let s=async e=>T.handle(X,B).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=q.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=a.get("next.route");if(r){let t=`${H} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":t}),e.updateName(t)}else e.updateName(`${H} ${y}`)}),i=!!(0,n.getRequestMeta)(e,"minimalMode"),l=async n=>{var o,l;let c=async({previousCacheEntry:a})=>{try{if(!i&&k&&S&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let o=await s(n);e.fetchMetrics=B.renderOpts.fetchMetrics;let l=B.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let c=B.renderOpts.collectedTags;if(!A)return await (0,p.sendResponse)(G,K,o,B.renderOpts.pendingWaitUntil),null;{let e=await o.blob(),t=(0,g.toNodeOutgoingHttpHeaders)(o.headers);c&&(t[m.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==B.renderOpts.collectedRevalidate&&!(B.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&B.renderOpts.collectedRevalidate,r=void 0===B.renderOpts.collectedExpire||B.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:B.renderOpts.collectedExpire;return{value:{kind:v.CachedRouteKind.APP_ROUTE,status:o.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:r}}}}catch(t){throw(null==a?void 0:a.isStale)&&await T.onRequestError(e,t,{routerKind:"App Router",routePath:y,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:j,isOnDemandRevalidate:k})},!1,U),t}},d=await T.handleResponse({req:e,nextConfig:w,cacheKey:D,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:$,isRoutePPREnabled:!1,isOnDemandRevalidate:k,revalidateOnlyGenerated:S,responseGenerator:c,waitUntil:r.waitUntil,isMinimalMode:i});if(!A)return null;if((null==d||null==(o=d.value)?void 0:o.kind)!==v.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(l=d.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",k?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),x&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let h=(0,g.fromNodeOutgoingHttpHeaders)(d.value.headers);return i&&A||h.delete(m.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||h.get("Cache-Control")||h.set("Cache-Control",(0,f.getCacheControlHeader)(d.cacheControl)),await (0,p.sendResponse)(G,K,new Response(d.value.body,{headers:h,status:d.value.status||200})),null};M?await l(M):await q.withPropagatedContext(e.headers,()=>q.trace(d.BaseServerSpan.handleRequest,{spanName:`${H} ${y}`,kind:o.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},l))}catch(t){if(t instanceof h.NoFallbackError||await T.onRequestError(e,t,{routerKind:"App Router",routePath:N,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:j,isOnDemandRevalidate:k})},!1,U),A)throw t;return await (0,p.sendResponse)(G,K,new Response(null,{status:500})),null}}e.s(["handler",()=>N,"patchFetch",()=>P,"routeModule",()=>T,"serverHooks",()=>I,"workAsyncStorage",()=>S,"workUnitAsyncStorage",()=>_],37765)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__90e775dc._.js.map