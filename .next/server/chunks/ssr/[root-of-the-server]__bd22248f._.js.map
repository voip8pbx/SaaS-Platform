{"version":3,"sources":["../../../../src/components/client/hotel/HotelCard.tsx/__nextjs-internal-proxy.mjs","../../../../src/components/client/villa/VillaSearchForm.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/client/villas/page.tsx","../../../../src/lib/client/villa-service.ts"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const HotelCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call HotelCard() from the server but HotelCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/client/hotel/HotelCard.tsx\",\n    \"HotelCard\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const VillaSearchForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call VillaSearchForm() from the server but VillaSearchForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/client/villa/VillaSearchForm.tsx\",\n    \"VillaSearchForm\",\n);\n","\r\nimport { VillaSearchForm } from \"@/components/client/villa/VillaSearchForm\";\r\nimport { HotelCard, HotelData } from \"@/components/client/hotel/HotelCard\"; // Reusing HotelCard for now\r\nimport { fetchVillas } from \"@/lib/client/villa-service\";\r\nimport { siteConfig } from \"@/config/client/siteConfig\";\r\nimport { cn } from \"@/lib/client/utils\";\r\n\r\nexport default async function VillasPage({\r\n    searchParams,\r\n}: {\r\n    searchParams: Promise<{ [key: string]: string | string[] | undefined }>\r\n}) {\r\n    const resolvedSearchParams = await searchParams;\r\n    const location = (resolvedSearchParams.location as string) || \"Bali\";\r\n    const guests = parseInt((resolvedSearchParams.guests as string) || \"2\");\r\n\r\n    // Fetch villas\r\n    let villas: HotelData[] = await fetchVillas(location);\r\n\r\n    const isClassic = siteConfig.layout === 'classic';\r\n\r\n    return (\r\n        <div className={cn(\"min-h-screen pb-20\", isClassic ? 'bg-white dark:bg-slate-950 font-serif' : 'bg-slate-50')}>\r\n            {/* Hero Section for Villas */}\r\n            <div className={cn(\"relative w-full overflow-hidden\", isClassic ? 'h-[400px]' : 'h-[500px]')}>\r\n                <div className=\"absolute inset-0 bg-black/40 z-10\" />\r\n                <div\r\n                    className=\"absolute inset-0 bg-cover bg-center\"\r\n                    style={{ backgroundImage: `url('https://images.unsplash.com/photo-1613977257363-707ba9348227?q=80&w=2070&auto=format&fit=crop')` }}\r\n                />\r\n                <div className=\"relative z-20 h-full flex flex-col justify-center items-center text-center px-4 pt-10\">\r\n                    <h1 className={cn(\"font-bold text-white mb-6 drop-shadow-lg tracking-tight\", isClassic ? 'text-5xl md:text-7xl italic' : 'text-4xl md:text-6xl')}>\r\n                        {isClassic ? 'Luxury Villas.' : 'Find Your Dream Villa'}\r\n                    </h1>\r\n                    <p className={cn(\"text-slate-200 max-w-2xl drop-shadow-md\", isClassic ? 'text-xl md:text-2xl font-light' : 'text-lg md:text-xl')}>\r\n                        Experience privacy and comfort in top-rated villas in {location}.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Search Form Container */}\r\n            <div className={cn(\"container mx-auto px-4 mb-16\", isClassic ? '-mt-16 relative z-30' : '')}>\r\n                <div className={isClassic ? 'bg-white dark:bg-slate-900 p-6 rounded-xl shadow-2xl border border-slate-100 dark:border-gray-800 max-w-4xl mx-auto' : ''}>\r\n                    <VillaSearchForm />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content Section */}\r\n            <div className=\"container mx-auto px-4\">\r\n                <div className=\"flex flex-col md:flex-row justify-between items-end mb-8\">\r\n                    <div>\r\n                        <h2 className={cn(\"text-2xl font-bold\", isClassic ? 'text-black dark:text-white font-serif text-3xl' : 'text-slate-900')}>\r\n                            {isClassic ? `Villas in ${location}` : `Villas in ${location}`}\r\n                        </h2>\r\n                        <p className={cn(\"mt-1\", isClassic ? \"text-gray-500 dark:text-gray-400\" : \"text-slate-500\")}>Showing {villas.length} properties</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {villas.length > 0 ? (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\r\n                        {villas.map(villa => (\r\n                            <div key={villa.id} className=\"h-full\">\r\n                                <HotelCard hotel={villa} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className={cn(\"rounded-2xl p-12 text-center border shadow-sm\", isClassic ? \"bg-white dark:bg-slate-900 border-gray-100 dark:border-gray-800\" : \"bg-white border-slate-100\")}>\r\n                        <div className=\"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                            <svg className=\"w-8 h-8 text-slate-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"></path></svg>\r\n                        </div>\r\n                        <h3 className={cn(\"text-xl font-bold mb-2\", isClassic ? \"text-black dark:text-white\" : \"text-slate-900\")}>No villas found</h3>\r\n                        <p className=\"text-slate-500 dark:text-slate-400 max-w-md mx-auto\">\r\n                            We couldn't find any villas in \"{location}\". Try changing the location.\r\n                        </p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","\r\nimport { HotelData } from \"@/components/client/hotel/HotelCard\";\r\n\r\nconst GOOGLE_API_KEY = process.env.GOOGLE_MAPS_API_KEY;\r\n\r\nexport async function fetchVillas(location: string, checkIn?: string, checkOut?: string) {\r\n    if (!location) return [];\r\n\r\n    try {\r\n        // Step 1: Geocoding to get Lat/Lng\r\n        const geoRes = await fetch(\r\n            `https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(location)}&key=${GOOGLE_API_KEY}`\r\n        );\r\n        const geoData = await geoRes.json();\r\n\r\n        if (!geoData.results || geoData.results.length === 0) {\r\n            console.warn(\"Geocoding found no results for:\", location);\r\n            return [];\r\n        }\r\n\r\n        const { lat, lng } = geoData.results[0].geometry.location;\r\n\r\n        // Step 2: Places API (Nearby Search) for 'lodging' with keyword 'villa'\r\n        // Radius: 5000 meters (5km)\r\n        const placesRes = await fetch(\r\n            `https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${lat},${lng}&radius=5000&type=lodging&keyword=villa&key=${GOOGLE_API_KEY}`\r\n        );\r\n        const placesData = await placesRes.json();\r\n\r\n        if (!placesData.results) {\r\n            return [];\r\n        }\r\n\r\n        // Helper to map types to amenities\r\n        const mapTypesToAmenities = (types: string[]) => {\r\n            const amenities = [];\r\n            if (types.includes(\"spa\")) amenities.push(\"Spa\");\r\n            if (types.includes(\"gym\")) amenities.push(\"Gym\");\r\n            if (types.includes(\"pool\") || types.includes(\"swimming_pool\")) amenities.push(\"Pool\");\r\n            if (types.includes(\"restaurant\") || types.includes(\"food\")) amenities.push(\"Restaurant\");\r\n            if (types.includes(\"bar\")) amenities.push(\"Bar\");\r\n            if (types.includes(\"parking\")) amenities.push(\"Parking\");\r\n\r\n            // Add some defaults if specific ones aren't found for better UI\r\n            if (amenities.length < 2) amenities.push(\"Kitchen\", \"Pool\", \"Garden\");\r\n\r\n            return Array.from(new Set(amenities)); // Unique only\r\n        };\r\n\r\n        // Transform results to our HotelData format (reusing HotelData for now)\r\n        const villas: HotelData[] = placesData.results.map((place: any) => {\r\n            const photoRef = place.photos?.[0]?.photo_reference;\r\n            const imageUrl = photoRef\r\n                ? `https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=${photoRef}&key=${GOOGLE_API_KEY}`\r\n                : \"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?auto=format&fit=crop&q=80&w=1000\"; // Villa placeholder\r\n\r\n            // Approximate price\r\n            let basePrice = 5000;\r\n            if (place.price_level) {\r\n                basePrice = place.price_level * 5000;\r\n            } else {\r\n                basePrice = (place.rating || 4.2) * 2000;\r\n            }\r\n            // Add some variance\r\n            const price = Math.round(basePrice + Math.random() * 2000);\r\n\r\n            return {\r\n                id: place.place_id,\r\n                name: place.name,\r\n                address: place.vicinity || place.formatted_address,\r\n                price: price,\r\n                rating: place.rating || 4.5,\r\n                amenities: mapTypesToAmenities(place.types || []),\r\n                image: imageUrl,\r\n                user_ratings_total: place.user_ratings_total\r\n            };\r\n        });\r\n\r\n        return villas;\r\n\r\n    } catch (error) {\r\n        console.error(\"Error fetching villas:\", error);\r\n        return [];\r\n    }\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[0,1]}